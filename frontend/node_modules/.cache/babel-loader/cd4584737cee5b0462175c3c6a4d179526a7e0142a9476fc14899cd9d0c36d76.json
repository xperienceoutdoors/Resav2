{"ast":null,"code":"import _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nconst _excluded = [\"parentProps\", \"day\", \"focusableDay\", \"selectedDays\", \"isDateDisabled\", \"currentMonthNumber\", \"isViewFocused\"],\n  _excluded2 = [\"ownerState\"];\nimport * as React from 'react';\nimport useEventCallback from '@mui/utils/useEventCallback';\nimport Typography from '@mui/material/Typography';\nimport { useSlotProps } from '@mui/base/utils';\nimport { styled, useTheme, useThemeProps } from '@mui/material/styles';\nimport { unstable_composeClasses as composeClasses, unstable_useControlled as useControlled } from '@mui/utils';\nimport clsx from 'clsx';\nimport { PickersDay } from '../PickersDay/PickersDay';\nimport { useUtils, useNow, useLocaleText } from '../internals/hooks/useUtils';\nimport { DAY_SIZE, DAY_MARGIN } from '../internals/constants/dimensions';\nimport { PickersSlideTransition } from './PickersSlideTransition';\nimport { useIsDateDisabled } from './useIsDateDisabled';\nimport { findClosestEnabledDate, getWeekdays } from '../internals/utils/date-utils';\nimport { getDayCalendarUtilityClass } from './dayCalendarClasses';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nconst useUtilityClasses = ownerState => {\n  const {\n    classes\n  } = ownerState;\n  const slots = {\n    root: ['root'],\n    header: ['header'],\n    weekDayLabel: ['weekDayLabel'],\n    loadingContainer: ['loadingContainer'],\n    slideTransition: ['slideTransition'],\n    monthContainer: ['monthContainer'],\n    weekContainer: ['weekContainer'],\n    weekNumberLabel: ['weekNumberLabel'],\n    weekNumber: ['weekNumber']\n  };\n  return composeClasses(slots, getDayCalendarUtilityClass, classes);\n};\nconst weeksContainerHeight = (DAY_SIZE + DAY_MARGIN * 2) * 6;\nconst PickersCalendarDayRoot = styled('div', {\n  name: 'MuiDayCalendar',\n  slot: 'Root',\n  overridesResolver: (_, styles) => styles.root\n})({});\nconst PickersCalendarDayHeader = styled('div', {\n  name: 'MuiDayCalendar',\n  slot: 'Header',\n  overridesResolver: (_, styles) => styles.header\n})({\n  display: 'flex',\n  justifyContent: 'center',\n  alignItems: 'center'\n});\nconst PickersCalendarWeekDayLabel = styled(Typography, {\n  name: 'MuiDayCalendar',\n  slot: 'WeekDayLabel',\n  overridesResolver: (_, styles) => styles.weekDayLabel\n})(({\n  theme\n}) => ({\n  width: 36,\n  height: 40,\n  margin: '0 2px',\n  textAlign: 'center',\n  display: 'flex',\n  justifyContent: 'center',\n  alignItems: 'center',\n  color: (theme.vars || theme).palette.text.secondary\n}));\nconst PickersCalendarWeekNumberLabel = styled(Typography, {\n  name: 'MuiDayCalendar',\n  slot: 'WeekNumberLabel',\n  overridesResolver: (_, styles) => styles.weekNumberLabel\n})(({\n  theme\n}) => ({\n  width: 36,\n  height: 40,\n  margin: '0 2px',\n  textAlign: 'center',\n  display: 'flex',\n  justifyContent: 'center',\n  alignItems: 'center',\n  color: theme.palette.text.disabled\n}));\nconst PickersCalendarWeekNumber = styled(Typography, {\n  name: 'MuiDayCalendar',\n  slot: 'WeekNumber',\n  overridesResolver: (_, styles) => styles.weekNumber\n})(({\n  theme\n}) => _extends({}, theme.typography.caption, {\n  width: DAY_SIZE,\n  height: DAY_SIZE,\n  padding: 0,\n  margin: `0 ${DAY_MARGIN}px`,\n  color: theme.palette.text.disabled,\n  fontSize: '0.75rem',\n  alignItems: 'center',\n  justifyContent: 'center',\n  display: 'inline-flex'\n}));\nconst PickersCalendarLoadingContainer = styled('div', {\n  name: 'MuiDayCalendar',\n  slot: 'LoadingContainer',\n  overridesResolver: (_, styles) => styles.loadingContainer\n})({\n  display: 'flex',\n  justifyContent: 'center',\n  alignItems: 'center',\n  minHeight: weeksContainerHeight\n});\nconst PickersCalendarSlideTransition = styled(PickersSlideTransition, {\n  name: 'MuiDayCalendar',\n  slot: 'SlideTransition',\n  overridesResolver: (_, styles) => styles.slideTransition\n})({\n  minHeight: weeksContainerHeight\n});\nconst PickersCalendarWeekContainer = styled('div', {\n  name: 'MuiDayCalendar',\n  slot: 'MonthContainer',\n  overridesResolver: (_, styles) => styles.monthContainer\n})({\n  overflow: 'hidden'\n});\nconst PickersCalendarWeek = styled('div', {\n  name: 'MuiDayCalendar',\n  slot: 'WeekContainer',\n  overridesResolver: (_, styles) => styles.weekContainer\n})({\n  margin: `${DAY_MARGIN}px 0`,\n  display: 'flex',\n  justifyContent: 'center'\n});\nfunction WrappedDay(_ref) {\n  var _ref2, _slots$day, _slotProps$day;\n  let {\n      parentProps,\n      day,\n      focusableDay,\n      selectedDays,\n      isDateDisabled,\n      currentMonthNumber,\n      isViewFocused\n    } = _ref,\n    other = _objectWithoutPropertiesLoose(_ref, _excluded);\n  const {\n    disabled,\n    disableHighlightToday,\n    isMonthSwitchingAnimating,\n    showDaysOutsideCurrentMonth,\n    components,\n    componentsProps,\n    slots,\n    slotProps,\n    timezone\n  } = parentProps;\n  const utils = useUtils();\n  const now = useNow(timezone);\n  const isFocusableDay = focusableDay !== null && utils.isSameDay(day, focusableDay);\n  const isSelected = selectedDays.some(selectedDay => utils.isSameDay(selectedDay, day));\n  const isToday = utils.isSameDay(day, now);\n  const Day = (_ref2 = (_slots$day = slots == null ? void 0 : slots.day) != null ? _slots$day : components == null ? void 0 : components.Day) != null ? _ref2 : PickersDay;\n  // We don't want to pass to ownerState down, to avoid re-rendering all the day whenever a prop changes.\n  const _useSlotProps = useSlotProps({\n      elementType: Day,\n      externalSlotProps: (_slotProps$day = slotProps == null ? void 0 : slotProps.day) != null ? _slotProps$day : componentsProps == null ? void 0 : componentsProps.day,\n      additionalProps: _extends({\n        disableHighlightToday,\n        showDaysOutsideCurrentMonth,\n        role: 'gridcell',\n        isAnimating: isMonthSwitchingAnimating,\n        // it is used in date range dragging logic by accessing `dataset.timestamp`\n        'data-timestamp': utils.toJsDate(day).valueOf()\n      }, other),\n      ownerState: _extends({}, parentProps, {\n        day,\n        selected: isSelected\n      })\n    }),\n    dayProps = _objectWithoutPropertiesLoose(_useSlotProps, _excluded2);\n  const isDisabled = React.useMemo(() => disabled || isDateDisabled(day), [disabled, isDateDisabled, day]);\n  const outsideCurrentMonth = React.useMemo(() => utils.getMonth(day) !== currentMonthNumber, [utils, day, currentMonthNumber]);\n  const isFirstVisibleCell = React.useMemo(() => {\n    const startOfMonth = utils.startOfMonth(utils.setMonth(day, currentMonthNumber));\n    if (!showDaysOutsideCurrentMonth) {\n      return utils.isSameDay(day, startOfMonth);\n    }\n    return utils.isSameDay(day, utils.startOfWeek(startOfMonth));\n  }, [currentMonthNumber, day, showDaysOutsideCurrentMonth, utils]);\n  const isLastVisibleCell = React.useMemo(() => {\n    const endOfMonth = utils.endOfMonth(utils.setMonth(day, currentMonthNumber));\n    if (!showDaysOutsideCurrentMonth) {\n      return utils.isSameDay(day, endOfMonth);\n    }\n    return utils.isSameDay(day, utils.endOfWeek(endOfMonth));\n  }, [currentMonthNumber, day, showDaysOutsideCurrentMonth, utils]);\n  return /*#__PURE__*/_jsx(Day, _extends({}, dayProps, {\n    day: day,\n    disabled: isDisabled,\n    autoFocus: isViewFocused && isFocusableDay,\n    today: isToday,\n    outsideCurrentMonth: outsideCurrentMonth,\n    isFirstVisibleCell: isFirstVisibleCell,\n    isLastVisibleCell: isLastVisibleCell,\n    selected: isSelected,\n    tabIndex: isFocusableDay ? 0 : -1,\n    \"aria-selected\": isSelected,\n    \"aria-current\": isToday ? 'date' : undefined\n  }));\n}\n\n/**\n * @ignore - do not document.\n */\nexport function DayCalendar(inProps) {\n  const props = useThemeProps({\n    props: inProps,\n    name: 'MuiDayCalendar'\n  });\n  const {\n    onFocusedDayChange,\n    className,\n    currentMonth,\n    selectedDays,\n    focusedDay,\n    loading,\n    onSelectedDaysChange,\n    onMonthSwitchingAnimationEnd,\n    readOnly,\n    reduceAnimations,\n    renderLoading = () => /*#__PURE__*/_jsx(\"span\", {\n      children: \"...\"\n    }),\n    slideDirection,\n    TransitionProps,\n    disablePast,\n    disableFuture,\n    minDate,\n    maxDate,\n    shouldDisableDate,\n    shouldDisableMonth,\n    shouldDisableYear,\n    dayOfWeekFormatter: dayOfWeekFormatterFromProps,\n    hasFocus,\n    onFocusedViewChange,\n    gridLabelId,\n    displayWeekNumber,\n    fixedWeekNumber,\n    autoFocus,\n    timezone\n  } = props;\n  const now = useNow(timezone);\n  const utils = useUtils();\n  const classes = useUtilityClasses(props);\n  const theme = useTheme();\n  const isRTL = theme.direction === 'rtl';\n\n  // before we could define this outside of the component scope, but now we need utils, which is only defined here\n  const dayOfWeekFormatter = dayOfWeekFormatterFromProps || ((_day, date) => utils.format(date, 'weekdayShort').charAt(0).toUpperCase());\n  const isDateDisabled = useIsDateDisabled({\n    shouldDisableDate,\n    shouldDisableMonth,\n    shouldDisableYear,\n    minDate,\n    maxDate,\n    disablePast,\n    disableFuture,\n    timezone\n  });\n  const localeText = useLocaleText();\n  const [internalHasFocus, setInternalHasFocus] = useControlled({\n    name: 'DayCalendar',\n    state: 'hasFocus',\n    controlled: hasFocus,\n    default: autoFocus != null ? autoFocus : false\n  });\n  const [internalFocusedDay, setInternalFocusedDay] = React.useState(() => focusedDay || now);\n  const handleDaySelect = useEventCallback(day => {\n    if (readOnly) {\n      return;\n    }\n    onSelectedDaysChange(day);\n  });\n  const focusDay = day => {\n    if (!isDateDisabled(day)) {\n      onFocusedDayChange(day);\n      setInternalFocusedDay(day);\n      onFocusedViewChange == null || onFocusedViewChange(true);\n      setInternalHasFocus(true);\n    }\n  };\n  const handleKeyDown = useEventCallback((event, day) => {\n    switch (event.key) {\n      case 'ArrowUp':\n        focusDay(utils.addDays(day, -7));\n        event.preventDefault();\n        break;\n      case 'ArrowDown':\n        focusDay(utils.addDays(day, 7));\n        event.preventDefault();\n        break;\n      case 'ArrowLeft':\n        {\n          const newFocusedDayDefault = utils.addDays(day, isRTL ? 1 : -1);\n          const nextAvailableMonth = utils.addMonths(day, isRTL ? 1 : -1);\n          const closestDayToFocus = findClosestEnabledDate({\n            utils,\n            date: newFocusedDayDefault,\n            minDate: isRTL ? newFocusedDayDefault : utils.startOfMonth(nextAvailableMonth),\n            maxDate: isRTL ? utils.endOfMonth(nextAvailableMonth) : newFocusedDayDefault,\n            isDateDisabled,\n            timezone\n          });\n          focusDay(closestDayToFocus || newFocusedDayDefault);\n          event.preventDefault();\n          break;\n        }\n      case 'ArrowRight':\n        {\n          const newFocusedDayDefault = utils.addDays(day, isRTL ? -1 : 1);\n          const nextAvailableMonth = utils.addMonths(day, isRTL ? -1 : 1);\n          const closestDayToFocus = findClosestEnabledDate({\n            utils,\n            date: newFocusedDayDefault,\n            minDate: isRTL ? utils.startOfMonth(nextAvailableMonth) : newFocusedDayDefault,\n            maxDate: isRTL ? newFocusedDayDefault : utils.endOfMonth(nextAvailableMonth),\n            isDateDisabled,\n            timezone\n          });\n          focusDay(closestDayToFocus || newFocusedDayDefault);\n          event.preventDefault();\n          break;\n        }\n      case 'Home':\n        focusDay(utils.startOfWeek(day));\n        event.preventDefault();\n        break;\n      case 'End':\n        focusDay(utils.endOfWeek(day));\n        event.preventDefault();\n        break;\n      case 'PageUp':\n        focusDay(utils.addMonths(day, 1));\n        event.preventDefault();\n        break;\n      case 'PageDown':\n        focusDay(utils.addMonths(day, -1));\n        event.preventDefault();\n        break;\n      default:\n        break;\n    }\n  });\n  const handleFocus = useEventCallback((event, day) => focusDay(day));\n  const handleBlur = useEventCallback((event, day) => {\n    if (internalHasFocus && utils.isSameDay(internalFocusedDay, day)) {\n      onFocusedViewChange == null || onFocusedViewChange(false);\n    }\n  });\n  const currentMonthNumber = utils.getMonth(currentMonth);\n  const validSelectedDays = React.useMemo(() => selectedDays.filter(day => !!day).map(day => utils.startOfDay(day)), [utils, selectedDays]);\n\n  // need a new ref whenever the `key` of the transition changes: http://reactcommunity.org/react-transition-group/transition/#Transition-prop-nodeRef.\n  const transitionKey = currentMonthNumber;\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  const slideNodeRef = React.useMemo(() => /*#__PURE__*/React.createRef(), [transitionKey]);\n  const startOfCurrentWeek = utils.startOfWeek(now);\n  const focusableDay = React.useMemo(() => {\n    const startOfMonth = utils.startOfMonth(currentMonth);\n    const endOfMonth = utils.endOfMonth(currentMonth);\n    if (isDateDisabled(internalFocusedDay) || utils.isAfterDay(internalFocusedDay, endOfMonth) || utils.isBeforeDay(internalFocusedDay, startOfMonth)) {\n      return findClosestEnabledDate({\n        utils,\n        date: internalFocusedDay,\n        minDate: startOfMonth,\n        maxDate: endOfMonth,\n        disablePast,\n        disableFuture,\n        isDateDisabled,\n        timezone\n      });\n    }\n    return internalFocusedDay;\n  }, [currentMonth, disableFuture, disablePast, internalFocusedDay, isDateDisabled, utils, timezone]);\n  const weeksToDisplay = React.useMemo(() => {\n    const currentMonthWithTimezone = utils.setTimezone(currentMonth, timezone);\n    const toDisplay = utils.getWeekArray(currentMonthWithTimezone);\n    let nextMonth = utils.addMonths(currentMonthWithTimezone, 1);\n    while (fixedWeekNumber && toDisplay.length < fixedWeekNumber) {\n      const additionalWeeks = utils.getWeekArray(nextMonth);\n      const hasCommonWeek = utils.isSameDay(toDisplay[toDisplay.length - 1][0], additionalWeeks[0][0]);\n      additionalWeeks.slice(hasCommonWeek ? 1 : 0).forEach(week => {\n        if (toDisplay.length < fixedWeekNumber) {\n          toDisplay.push(week);\n        }\n      });\n      nextMonth = utils.addMonths(nextMonth, 1);\n    }\n    return toDisplay;\n  }, [currentMonth, fixedWeekNumber, utils, timezone]);\n  return /*#__PURE__*/_jsxs(PickersCalendarDayRoot, {\n    role: \"grid\",\n    \"aria-labelledby\": gridLabelId,\n    className: classes.root,\n    children: [/*#__PURE__*/_jsxs(PickersCalendarDayHeader, {\n      role: \"row\",\n      className: classes.header,\n      children: [displayWeekNumber && /*#__PURE__*/_jsx(PickersCalendarWeekNumberLabel, {\n        variant: \"caption\",\n        role: \"columnheader\",\n        \"aria-label\": localeText.calendarWeekNumberHeaderLabel,\n        className: classes.weekNumberLabel,\n        children: localeText.calendarWeekNumberHeaderText\n      }), getWeekdays(utils, now).map((weekday, i) => {\n        var _dayOfWeekFormatter;\n        const day = utils.format(weekday, 'weekdayShort');\n        return /*#__PURE__*/_jsx(PickersCalendarWeekDayLabel, {\n          variant: \"caption\",\n          role: \"columnheader\",\n          \"aria-label\": utils.format(utils.addDays(startOfCurrentWeek, i), 'weekday'),\n          className: classes.weekDayLabel,\n          children: (_dayOfWeekFormatter = dayOfWeekFormatter == null ? void 0 : dayOfWeekFormatter(day, weekday)) != null ? _dayOfWeekFormatter : day\n        }, day + i.toString());\n      })]\n    }), loading ? /*#__PURE__*/_jsx(PickersCalendarLoadingContainer, {\n      className: classes.loadingContainer,\n      children: renderLoading()\n    }) : /*#__PURE__*/_jsx(PickersCalendarSlideTransition, _extends({\n      transKey: transitionKey,\n      onExited: onMonthSwitchingAnimationEnd,\n      reduceAnimations: reduceAnimations,\n      slideDirection: slideDirection,\n      className: clsx(className, classes.slideTransition)\n    }, TransitionProps, {\n      nodeRef: slideNodeRef,\n      children: /*#__PURE__*/_jsx(PickersCalendarWeekContainer, {\n        ref: slideNodeRef,\n        role: \"rowgroup\",\n        className: classes.monthContainer,\n        children: weeksToDisplay.map((week, index) => /*#__PURE__*/_jsxs(PickersCalendarWeek, {\n          role: \"row\",\n          className: classes.weekContainer\n          // fix issue of announcing row 1 as row 2\n          // caused by week day labels row\n          ,\n\n          \"aria-rowindex\": index + 1,\n          children: [displayWeekNumber && /*#__PURE__*/_jsx(PickersCalendarWeekNumber, {\n            className: classes.weekNumber,\n            role: \"rowheader\",\n            \"aria-label\": localeText.calendarWeekNumberAriaLabelText(utils.getWeekNumber(week[0])),\n            children: localeText.calendarWeekNumberText(utils.getWeekNumber(week[0]))\n          }), week.map((day, dayIndex) => /*#__PURE__*/_jsx(WrappedDay, {\n            parentProps: props,\n            day: day,\n            selectedDays: validSelectedDays,\n            focusableDay: focusableDay,\n            onKeyDown: handleKeyDown,\n            onFocus: handleFocus,\n            onBlur: handleBlur,\n            onDaySelect: handleDaySelect,\n            isDateDisabled: isDateDisabled,\n            currentMonthNumber: currentMonthNumber,\n            isViewFocused: internalHasFocus\n            // fix issue of announcing column 1 as column 2 when `displayWeekNumber` is enabled\n            ,\n\n            \"aria-colindex\": dayIndex + 1\n          }, day.toString()))]\n        }, `week-${week[0]}`))\n      })\n    }))]\n  });\n}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}